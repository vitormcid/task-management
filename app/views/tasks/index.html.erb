
<div style="text-align:right;">
    <%= link_to "Nova Tarefa - #{image_tag("create_task.png", :border=>0, :class => 'dock-item', size: "40x40")}".html_safe,new_task_path, data: { modal: true }%>
</div>    
<hr>
<table id="tasks" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>                
                <th>Id</th>               
                <th>Nome</th>               
                <th>Equipe</th>               
                <th>Data de Início</th>
                <th>Data de Término</th>
                <th>Justificativa do cancelamento</th>
                <th>Status</th>
                <th>Usuário</th>
                <th>Opções</th>
            </tr>
        </thead>
        <tbody>
            <% @tasks.each do |task| %>
                <tr>
                    <td><%=task.id%></td>               
                    <td><%=task.name%></td>               
                    <td><%=task.team&.name%></td>               
                    <td><%=task.start_at&.strftime("%d/%m/%y %H:%M")%></td>               
                    <td><%=task.end_at&.strftime("%d/%m/%y %H:%M")%></td>               
                    <td><%=task.cancellation_justification%></td>               
                    <td><%=task.status_text%></td>               
                    <td><%=task.user&.email%></td>               
                    <td>  
                    
                        <%= link_to image_tag("approve_task.png", :border=>0, :class => 'dock-item', size: "20x20").html_safe, task_path(task.id), data: { modal: true }%>

                        <% if task.status.in_progress? %>
                            <%= link_to image_tag("approve_task.png", :border=>0, :class => 'dock-item', size: "20x20").html_safe, successfully_completed_task_path(task.id), data: { modal: true }%>              

                            <%= link_to image_tag("cancel_task.png", :border=>0, :class => 'dock-item', size: "20x20"),
                            cancelled_task_path(task.id), data: { modal: true }%>
                        <% end %>   
                    </td>                  
                </tr> 
            <% end %>    
           
        </tbody>
        <tfoot>
            <th>Id</th>               
            <th>Nome</th>               
            <th>Equipe</th>               
            <th>Data de Início</th>
            <th>Data de Término</th>
            <th>Justificativa do cancelamento</th>
            <th>Status</th>
            <th>Usuário</th>
            <th>Opções</th>
        </tfoot>
    </table>                
 

<script type="text/javascript">
    $(document).ready(function() {
        $('#tasks').DataTable( {
            "lengthMenu": [[10, 15 ,25, 50, -1], [10, 15, 25, 50, "All"]],
            "ordering": false
        }
        );

    });
</script>